(function () {
    var n, t, i;
    n = jQuery, i = function () {
        function n() {
            this.fileLoadingImage = "images/loading.gif", this.fileCloseImage = "images/close.png", this.resizeDuration = 700, this.fadeDuration = 500, this.labelImage = "Image", this.labelOf = "of"
        }

        return n
    }(), t = function () {
        function t(n) {
            this.options = n, this.album = [], this.currentImageIndex = void 0, this.init()
        }

        return t.prototype.init = function () {
            return this.enable(), this.build()
        }, t.prototype.enable = function () {
            var t = this;
            return n("body").on("click", "a[rel^=lightbox], area[rel^=lightbox]", function (i) {
                return t.start(n(i.currentTarget)), !1
            })
        }, t.prototype.build = function () {
            var i, t = this;
            n("<div>", {id:"lightboxOverlay"}).after(n("<div/>", {id:"lightbox"}).append(n("<div/>", {"class":"lb-outerContainer"}).append(n("<div/>", {"class":"lb-container"}).append(n("<img/>", {"class":"lb-image"}), n("<div/>", {"class":"lb-nav"}).append(n("<a/>", {"class":"lb-prev"}), n("<a/>", {"class":"lb-next"})), n("<div/>", {"class":"lb-loader"}).append(n("<a/>", {"class":"lb-cancel"}).append(n("<img/>", {src:this.options.fileLoadingImage}))))), n("<div/>", {"class":"lb-dataContainer"}).append(n("<div/>", {"class":"lb-data"}).append(n("<div/>", {"class":"lb-details"}).append(n("<span/>", {"class":"lb-caption"}), n("<span/>", {"class":"lb-number"})), n("<div/>", {"class":"lb-closeContainer"}).append(n("<a/>", {"class":"lb-close"}).append(n("<img/>", {src:this.options.fileCloseImage}))))))).appendTo(n("body"));
            n("#lightboxOverlay").hide().on("click", function () {
                return t.end(), !1
            });
            i = n("#lightbox");
            i.hide().on("click", function (i) {
                return n(i.target).attr("id") === "lightbox" && t.end(), !1
            });
            i.find(".lb-outerContainer").on("click", function (i) {
                return n(i.target).attr("id") === "lightbox" && t.end(), !1
            });
            i.find(".lb-prev").on("click", function () {
                return t.changeImage(t.currentImageIndex - 1), !1
            });
            i.find(".lb-next").on("click", function () {
                return t.changeImage(t.currentImageIndex + 1), !1
            });
            i.find(".lb-loader, .lb-close").on("click", function () {
                return t.end(), !1
            })
        }, t.prototype.start = function (t) {
            var o, r, u, i, f, s, h, c, e;
            n(window).on("resize", this.sizeOverlay);
            if (n("select, object, embed").css({visibility:"hidden"}), n("#lightboxOverlay").width(n(document).width()).height(n(document).height()).fadeIn(this.options.fadeDuration), this.album = [], f = 0, t.attr("rel") === "lightbox")this.album.push({link:t.attr("href"), title:t.attr("title")}); else for (e = n(t.prop("tagName") + '[rel="' + t.attr("rel") + '"]'), i = 0, c = e.length; i < c; i++)u = e[i], this.album.push({link:n(u).attr("href"), title:n(u).attr("title")}), n(u).attr("href") === t.attr("href") && (f = i);
            r = n(window), h = r.scrollTop() + r.height() / 10, s = r.scrollLeft(), o = n("#lightbox"), o.css({top:h + "px", left:s + "px"}).fadeIn(this.options.fadeDuration), this.changeImage(f)
        }, t.prototype.changeImage = function (t) {
            var r, u, i, f = this;
            this.disableKeyboardNav(), u = n("#lightbox"), r = u.find(".lb-image"), this.sizeOverlay(), n("#lightboxOverlay").fadeIn(this.options.fadeDuration), n(".loader").fadeIn("slow"), u.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(), u.find(".lb-outerContainer").addClass("animating"), i = new Image, i.onload = function () {
                return r.attr("src", f.album[t].link), r.width = i.width, r.height = i.height, f.sizeContainer(i.width, i.height)
            }, i.src = this.album[t].link, this.currentImageIndex = t
        }, t.prototype.sizeOverlay = function () {
            return n("#lightboxOverlay").width(n(document).width()).height(n(document).height())
        }, t.prototype.sizeContainer = function (t, i) {
            var o, u, f, c, l, a, v, r, e, s, h, y = this;
            u = n("#lightbox"), f = u.find(".lb-outerContainer"), h = f.outerWidth(), s = f.outerHeight(), o = u.find(".lb-container"), v = parseInt(o.css("padding-top"), 10), a = parseInt(o.css("padding-right"), 10), c = parseInt(o.css("padding-bottom"), 10), l = parseInt(o.css("padding-left"), 10), e = t + l + a, r = i + v + c, e !== h && r !== s ? f.animate({width:e, height:r}, this.options.resizeDuration, "swing") : e !== h ? f.animate({width:e}, this.options.resizeDuration, "swing") : r !== s && f.animate({height:r}, this.options.resizeDuration, "swing"), setTimeout(function () {
                u.find(".lb-dataContainer").width(e), u.find(".lb-prevLink").height(r), u.find(".lb-nextLink").height(r), y.showImage()
            }, this.options.resizeDuration)
        }, t.prototype.showImage = function () {
            var t;
            t = n("#lightbox"), t.find(".lb-loader").hide(), t.find(".lb-image").fadeIn("slow"), this.updateNav(), this.updateDetails(), this.preloadNeighboringImages(), this.enableKeyboardNav()
        }, t.prototype.updateNav = function () {
            var t;
            t = n("#lightbox"), t.find(".lb-nav").show(), this.currentImageIndex > 0 && t.find(".lb-prev").show(), this.currentImageIndex < this.album.length - 1 && t.find(".lb-next").show()
        }, t.prototype.updateDetails = function () {
            var t, i = this;
            t = n("#lightbox"), typeof this.album[this.currentImageIndex].title != "undefined" && this.album[this.currentImageIndex].title !== "" && t.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast"), this.album.length > 1 ? t.find(".lb-number").html(this.options.labelImage + " " + (this.currentImageIndex + 1) + " " + this.options.labelOf + "  " + this.album.length).fadeIn("fast") : t.find(".lb-number").hide(), t.find(".lb-outerContainer").removeClass("animating"), t.find(".lb-dataContainer").fadeIn(this.resizeDuration, function () {
                return i.sizeOverlay()
            })
        }, t.prototype.preloadNeighboringImages = function () {
            var n, t;
            this.album.length > this.currentImageIndex + 1 && (n = new Image, n.src = this.album[this.currentImageIndex + 1].link), this.currentImageIndex > 0 && (t = new Image, t.src = this.album[this.currentImageIndex - 1].link)
        }, t.prototype.enableKeyboardNav = function () {
            n(document).on("keyup.keyboard", n.proxy(this.keyboardAction, this))
        }, t.prototype.disableKeyboardNav = function () {
            n(document).off(".keyboard")
        }, t.prototype.keyboardAction = function (n) {
            var r, u, f, i, t;
            r = 27, u = 37, f = 39, t = n.keyCode, i = String.fromCharCode(t).toLowerCase(), t === r || i.match(/x|o|c/) ? this.end() : i === "p" || t === u ? this.currentImageIndex !== 0 && this.changeImage(this.currentImageIndex - 1) : (i === "n" || t === f) && this.currentImageIndex !== this.album.length - 1 && this.changeImage(this.currentImageIndex + 1)
        }, t.prototype.end = function () {
            return this.disableKeyboardNav(), n(window).off("resize", this.sizeOverlay), n("#lightbox").fadeOut(this.options.fadeDuration), n("#lightboxOverlay").fadeOut(this.options.fadeDuration), n("select, object, embed").css({visibility:"visible"})
        }, t
    }(), n(function () {
        var n;
        return n = new i, new t(n)
    })
}).call(this);
//@ sourceMappingURL=lightbox.min.js.map