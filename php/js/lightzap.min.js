(function () {
    var t = jQuery, r = [], a, v, i, u, o, n, h, s, c, l, e = !1, y = 10, p = 10, f = ["webkit", "moz", "ms", "o", ""];
    v = function () {
        function n() {
            this.resizeDuration = 700, this.fadeDuration = 800, this.imagetext = "", this.oftext = " / ", this.bytext = "by", this.print = !1, this.download = !0, this.addthis = !0
        }

        return n
    }(), a = function () {
        function a(r) {
            n = this, n.options = r;
            t("body").on("click", "a[rel^=lightzap], area[rel^=lightzap]", function (i) {
                return n.start(t(i.currentTarget)), !1
            });
            t("body").on("click", "a[rel^=lightbox], area[rel^=lightbox]", function (i) {
                return n.start(t(i.currentTarget)), !1
            });
            t("<div/>", {id:"lightzap"}).append(t("<div/>", {"class":"lz-container"}).append(t("<div/>", {"class":"lz-loader"}), t("<img/>", {"class":"lz-image"}), t("<div/>", {"class":"lz-nav"}).append(t("<a/>", {"class":"lz-prev"}), t("<a/>", {"class":"lz-next"})), t("<div/>", {"class":"lz-float lz-buttonContainer"}).append(t("<div/>", {"class":"lz-more lz-button"}), t("<div/>", {"class":"lz-close lz-button"})), t("<div/>", {"class":"lz-labelContainer"}).append(t("<div/>", {"class":"lz-float lz-caption"}), t("<div/>", {"class":"lz-float lz-desc"}), t("<div/>", {"class":"lz-float lz-resolution"}), t("<div/>", {"class":"lz-float lz-number"}), t("<a/>", {"class":"lz-float lz-by"})))).appendTo(t("body")), i = t("#lightzap").hide(), o = i.find(".lz-image"), u = i.find(".lz-container"), i.width(h).height(s), p = parseInt(u.css("margin-top"), 10) + parseInt(u.css("margin-bottom"), 10) + parseInt(u.css("padding-top"), 10) + parseInt(u.css("padding-bottom"), 10), y = parseInt(u.css("margin-left"), 10) + parseInt(u.css("margin-right"), 10) + parseInt(u.css("padding-left"), 10) + parseInt(u.css("padding-right"), 10);
            for (var w = ["IsFullScreen", "FullScreen"], l = ["CancelFullScreen", "RequestFullScreen"], a = 0, v, c, b = "undefined"; a < f.length && !document[c];) {
                for (v = 0; v < w.length;) {
                    if (c = w[v], f[a] == "" && (c = c.substr(0, 1).toLowerCase() + c.substr(1), l[0] = l[0].substr(0, 1).toLowerCase() + l[0].substr(1), l[1] = l[1].substr(0, 1).toLowerCase() + l[1].substr(1)), c = f[a] + c, b = typeof document[c], b != "undefined") {
                        f = [f[a] + l[0], f[a] + l[1], c], a = 2;
                        break
                    }
                    v++
                }
                a++
            }
            if (a != 3)f = !1; else {
                t("<div/>", {"class":"lz-fullScreen lz-button"}).insertBefore(".lz-close");
                i.find(".lz-fullScreen").on("click", function () {
                    e ? document[f[0]]() : document.getElementById("lightzap")[f[1]]()
                })
            }
            if (this.options.print) {
                t("<div/>", {"class":"lz-button lz-print"}).insertBefore(".lz-close");
                i.find(".lz-print").on("click", n.print)
            }
            if (this.options.download) {
                t("<div/>", {"class":"lz-button lz-download", target:"_blank"}).insertBefore(".lz-close");
                i.find(".lz-download").on("click", n.download)
            }
            i.find(".lz-close").on("click", n.end);
            i.find(".lz-desc").hide();
            i.find(".lz-more").on("click", function () {
                i.find(".lz-desc").css("display") == "none" ? i.find(".lz-desc").show() : i.find(".lz-desc").hide()
            });
            i.on("click", function (i) {
                t(i.target).attr("id") === "lightzap" && n.end()
            });
            i.find(".lz-prev").on("click", function () {
                n.changeImage(n.currentImageIndex - 1)
            });
            i.find(".lz-next").on("click", function () {
                n.changeImage(n.currentImageIndex + 1)
            })
        }

        return a.prototype.start = function (u) {
            n.sizeOverlay(), i.fadeIn(n.options.fadeDuration);
            t(window).on("resize", n.sizeOverlay);
            t("select, object, embed").css("visibility", "hidden"), r = [];
            var f, e, s = 0, h, o;
            if (u.attr("rel") === "lightzap" || u.attr("rel") === "lightbox")r.push({link:u.attr("href"), title:u.attr("title"), desc:u.attr("desc"), by:u.attr("by"), by_href:u.attr("by-href")}); else for (o = t(u.prop("tagName") + "[rel='" + u.attr("rel") + "']"), e = 0, h = o.length; e < h; e++)f = o[e], r.push({link:t(f).attr("href"), title:t(f).attr("title"), desc:t(f).attr("desc"), by:t(f).attr("by"), by_href:t(f).attr("by-href")}), t(f).attr("href") === u.attr("href") && (s = e);
            n.changeImage(s)
        }, a.prototype.changeImage = function (f) {
            t(document).off(".keyboard"), i.find(".lz-image, .lz-nav, .lz-prev, .lz-next, .lz-float").hide(), i.find(".lz-loader").show(), u.addClass("animating");
            var e = new Image;
            e.onload = function () {
                return o.attr("src", r[f].link), c = e.width, l = e.height, n.currentImageIndex = f, n.getImageSize()
            }, e.src = r[f].link
        }, a.prototype.sizeOverlay = function () {
            (h != t(window).width() || s != t(window).height()) && (h = t(window).width(), s = t(window).height(), i.width(h).height(s), e = !1, f != !1 && (e = typeof document[f[2]] == "function" ? document[f[2]]() : document[f[2]]), e || (e = h >= screen.width * .99 && s >= screen.height * .99 ? !0 : !1), e ? (i.attr("class", "full-screen"), i.attr("style", ""), u.attr("style", "height: 100%;")) : (i.attr("class", ""), u.attr("style", "")), r.length > 0 && n.getImageSize())
        }, a.prototype.getImageSize = function () {
            var w, b;
            o.css("height", "auto");
            var a = h, v = s, r = c, t = l;
            if (e ? f && (a = screen.width, v = screen.height) : (a -= y, v -= p), r > a && (t = a * t / r, r = a), t > v && (r = v * r / t, t = v), e)return o.css("height", t), o.css("margin", Math.max((v - t) / 2, 0) + "px " + Math.max((a - r) / 2, 0) + "px"), u.css("margin", "0"), n.showImage();
            w = u.outerWidth(), b = u.outerHeight(), o.css("margin", "0"), u.css("margin", (s - t) / 2 + "px auto 0"), u.attr("class") == "lz-container animating" ? r !== b && t !== w ? u.animate({width:r, height:t}, n.options.resizeDuration, "swing") : r !== b ? u.animate({width:r}, n.options.resizeDuration, "swing") : t !== w && u.animate({height:t}, n.options.resizeDuration, "swing") : u.width(r).height(t), setTimeout(function () {
                i.find(".lz-prevLink").height(t), i.find(".lz-nextLink").height(t), n.showImage()
            }, n.options.resizeDuration)
        }, a.prototype.showImage = function () {
            i.find(".lz-loader").hide(), o.fadeIn("slow"), n.updateNav(), n.updateDetails();
            var u, f;
            r.length > n.currentImageIndex + 1 && (u = new Image, u.src = r[n.currentImageIndex + 1].link), n.currentImageIndex > 0 && (f = new Image, f.src = r[n.currentImageIndex - 1].link);
            t(document).on("keyup.keyboard", t.proxy(n.keyboardAction, n))
        }, a.prototype.updateNav = function () {
            i.find(".lz-nav").show(), n.currentImageIndex > 0 && i.find(".lz-prev").show(), n.currentImageIndex < r.length - 1 && i.find(".lz-next").show()
        }, a.prototype.updateDetails = function () {
            typeof r[n.currentImageIndex].title != "undefined" && r[n.currentImageIndex].title !== "" && i.find(".lz-caption").html(r[n.currentImageIndex].title).fadeIn("fast"), typeof r[n.currentImageIndex].desc != "undefined" && r[n.currentImageIndex].desc !== "" ? (i.find(".lz-desc").html(r[n.currentImageIndex].desc).hide(), i.find(".lz-more").show()) : i.find(".lz-more").hide(), r.length > 1 ? i.find(".lz-number").html(n.options.imagetext + (n.currentImageIndex + 1) + n.options.oftext + r.length).fadeIn("fast") : i.find(".lz-number").hide(), typeof r[n.currentImageIndex].by != "undefined" && r[n.currentImageIndex].by !== "" ? i.find(".lz-by").html(n.options.bytext + " <span>" + r[n.currentImageIndex].by + "<\/span>").fadeIn("fast") : i.find(".lz-by").html(""), typeof r[n.currentImageIndex].by_href != "undefined" && r[n.currentImageIndex].by_href !== "" ? i.find(".lz-by").prop("href", r[n.currentImageIndex].by_href) : i.find(".lz-by").prop("href", ""), this.options.addthis && i.find(".lz-like").show().attr("addthis:url", r[n.currentImageIndex].link), i.find(".lz-resolution").html(c + " x " + l).fadeIn("fast"), u.removeClass("animating"), i.find(".lz-buttonContainer").fadeIn(n.resizeDuration)
        }, a.prototype.keyboardAction = function (t) {
            var f, e, s, o, u, i;
            f = 27, e = 37, o = 39, s = 122, i = t.keyCode, u = String.fromCharCode(i).toLowerCase(), i === f || u.match(/x|o|c/) ? n.end() : u == "p" || i == e ? n.currentImageIndex != 0 && n.changeImage(n.currentImageIndex - 1) : (u == "n" || i == o) && n.currentImageIndex != r.length - 1 && n.changeImage(n.currentImageIndex + 1)
        }, a.prototype.print = function () {
            win = window.open(), self.focus(), win.document.open(), win.document.write("<html><body stlye='margin:0 auto; padding:0;1>"), win.document.write("<div align='center' style='margin: 0 auto;'><img src='" + r[n.currentImageIndex].link + "' style='max-width: 100%; max-height: 90%;'/><\/div>"), win.document.write("<strong>" + r[n.currentImageIndex].title + "<\/strong><\/br><i>" + i.find(".lz-by").html() + "<\/i>"), win.document.write("<\/body><\/html>"), win.document.close(), win.print(), win.close()
        }, a.prototype.download = function () {
            var i, t, u;
            if (window.webkitURL)return i = new XMLHttpRequest, i.open("GET", r[n.currentImageIndex].link), i.multipart = !0, i.responseType = "blob", i.onload = function () {
                var t = document.createElement("a"), u;
                t.href = window.URL ? window.URL.createObjectURL(i.response) : window.webkitURL.createObjectURL(i.response), t.download = r[n.currentImageIndex].link.substring(r[n.currentImageIndex].link.lastIndexOf("/") + 1), u = document.createEvent("MouseEvents"), u.initMouseEvent("click", !0, !1, window, 0, 0, 0, 0, 0, !1, !1, !1, !1, 0, null), t.dispatchEvent(u)
            }, i.send(null), !0;
            if (navigator.appName == "Microsoft Internet Explorer")return win = window.open(r[n.currentImageIndex].link), self.focus(), win.document.execCommand("SaveAs"), win.close(), !0;
            if (t = document.createElement("canvas"), document.body.appendChild(t), typeof t.getContext != "undefined")try {
                return u = t.getContext("2d"), t.width = Math.min(c, 1024), t.height = Math.min(l, l / c * 1024), t.style.width = t.width + "px", t.style.height = t.height + "px", u.drawImage(document.getElementsByClassName("lz-image")[0], 0, 0, t.width, t.height), document.location.href = t.toDataURL("image/png").replace("image/png", "image/octet-stream"), document.body.removeChild(t), !0
            } catch (f) {
                document.body.removeChild(t)
            }
            alert("Sorry, can't download")
        }, a.prototype.end = function () {
            e && f != !1 && document[f[0]](), r = [], t(document).off(".keyboard"), t(window).off("resize", n.sizeOverlay), i.fadeOut(n.options.fadeDuration), t("select, object, embed").css("visibility", "visible")
        }, a
    }(), t(function () {
        var n;
        return n = new v, new a(n)
    })
}).call(this);
//@ sourceMappingURL=lightzap.min.js.map